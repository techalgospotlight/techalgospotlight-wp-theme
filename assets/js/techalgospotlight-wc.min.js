"use strict";
!(function (e) {
  var t = !1,
    o = e("body"),
    n = e("#page"),
    i = {
      init: function () {
        e(document).ready(i.ready),
          e(document).ajaxComplete(i.ajaxComplete),
          o.on("added_to_cart", i.addedToCart),
          i.bindUIActions();
      },
      ready: function () {
        i.customDropdown(), i.quantButtons();
      },
      ajaxComplete: function () {
        i.quantButtons();
      },
      addedToCart: function () {
        i.showCartDropdown();
      },
      bindUIActions: function () {
        i.removeCartItem();
      },
      quantButtons: function () {
        var t,
          o,
          n,
          i,
          a = e("div.quantity:not(.appended), td.quantity:not(.appended)").find(
            ".qty"
          );
        a.length &&
          "date" !== a.prop("type") &&
          "hidden" !== a.prop("type") &&
          (a.parent().addClass("appended"),
          a.after(
            '<a href="#" class="techalgospotlight-woo-minus">-</a><a href="#" class="techalgospotlight-woo-plus">+</a>'
          ),
          e(".techalgospotlight-woo-plus, .techalgospotlight-woo-minus").unbind(
            "click"
          ),
          e(".techalgospotlight-woo-plus, .techalgospotlight-woo-minus").on(
            "click",
            function (r) {
              r.preventDefault(),
                (i = e(this)),
                (n = i.parent().find("input")),
                (o = n.val()),
                (t = 0),
                i.hasClass("techalgospotlight-woo-plus")
                  ? (t = parseInt(o) + 1)
                  : o > 0 && (t = parseInt(o) - 1),
                n.val(t),
                a.trigger("change");
            }
          ));
      },
      showCartDropdown: function () {
        e(".techalgospotlight-header-widget__cart").length &&
          (e(".techalgospotlight-header-widget__cart").addClass(
            "dropdown-visible"
          ),
          setTimeout(function () {
            e("#techalgospotlight-header-inner")
              .find(".techalgospotlight-cart")
              .find(".techalgospotlight-cart-count")
              .addClass("animate-pop");
          }, 100),
          t && (clearTimeout(t), (t = !1)),
          (t = setTimeout(function () {
            e(".techalgospotlight-header-widget__cart")
              .removeClass("dropdown-visible")
              .find(".dropdown-item")
              .removeAttr("style");
          }, 5e3)));
      },
      customDropdown: function () {
        if (e("form.woocommerce-ordering").length) {
          var t = e("form.woocommerce-ordering .orderby"),
            o = e("form.woocommerce-ordering"),
            n = e("form.woocommerce-ordering .orderby option:selected").text();
          o.append(
            '<span id="techalgospotlight-orderby"><span>' +
              n +
              '</span><svg class="techalgospotlight-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path d="M24.958 10.483a1.29 1.29 0 00-1.868 0l-7.074 7.074-7.074-7.074c-.534-.534-1.335-.534-1.868 0s-.534 1.335 0 1.868l8.008 8.008c.267.267.667.4.934.4s.667-.133.934-.4l8.008-8.008a1.29 1.29 0 000-1.868z"/></svg></span>'
          ),
            t.addClass("custom-select-loaded");
          var i = e("#techalgospotlight-orderby");
          t.width(i.width()).css("height", i.height() + "px"),
            t.change(function () {
              i
                .find("span")
                .html(
                  e("form.woocommerce-ordering .orderby option:selected").text()
                ),
                e(this).width(i.width());
            });
        }
      },
      removeCartItem: function () {
        var t;
        e(".techalgospotlight-remove-cart-item").length &&
          n.on("click", ".techalgospotlight-remove-cart-item", function (n) {
            n.preventDefault(),
              (t = e(this))
                .closest(".techalgospotlight-cart-item")
                .addClass("removing");
            var i = {
              action: "techalgospotlight_remove_wc_cart_item",
              _ajax_nonce: techalgospotlight_vars.nonce,
              product_key: t.data("product_key"),
            };
            e.post(techalgospotlight_vars.ajaxurl, i, function (e) {
              e.success
                ? o.trigger("wc_fragment_refresh")
                : t
                    .closest(".techalgospotlight-cart-item")
                    .removeClass("removing");
            });
          });
      },
    };
  i.init(), (window.techalgospotlight_wc = i);
})(jQuery);
