!(function (t) {
  "use strict";
  var n = {
    init: function () {
      t(document).ready(n.ready),
        t(window).on("load", n.load),
        n.bindUIActions(),
        t(document).trigger("techalgospotlightReady");
    },
    ready: function () {},
    load: function () {
      window.dispatchEvent(new Event("resize"));
    },
    resize: function () {},
    bindUIActions: function () {
      var e,
        a = t("#wpwrap");
      t("body");
      a.on("click", ".plugins .hester-btn:not(.active)", function (s) {
        s.preventDefault(),
          a.find(".plugins .hester-btn.in-progress").length ||
            ((e = t(this)), n.pluginAction(e));
      }),
        t(document).on("wp-plugin-install-success", n.pluginInstallSuccess),
        t(document).on("wp-plugin-install-error", n.pluginInstallError);
    },
    pluginAction: function (n) {
      if (
        (n
          .addClass("in-progress")
          .attr("disabled", "disabled")
          .html(hester_strings.texts[n.data("action") + "-inprogress"]),
        "install" === n.data("action"))
      )
        wp.updates.shouldRequestFilesystemCredentials &&
          !wp.updates.ajaxLocked &&
          (wp.updates.requestFilesystemCredentials(event),
          t(document).on("credential-modal-cancel", function () {
            n
              .removeAttr("disabled")
              .removeClass("in-progress")
              .html(hester_strings.texts.install),
              wp.a11y.speak(wp.updates.l10n.updateCancel, "polite");
          })),
          wp.updates.installPlugin({ slug: n.data("plugin") });
      else {
        var e = {
          _ajax_nonce: hester_strings.wpnonce,
          plugin: n.data("plugin"),
          action: "hester-plugin-" + n.data("action"),
        };
        t.post(hester_strings.ajaxurl, e, function (e) {
          e.success
            ? n.data("redirect")
              ? (window.location.href = n.data("redirect"))
              : location.reload()
            : t(".plugins .hester-btn.in-progress")
                .removeAttr("disabled")
                .removeClass("in-progress primary")
                .addClass("secondary")
                .html(hester_strings.texts.retry);
        });
      }
    },
    pluginInstallSuccess: function (e, a) {
      e.preventDefault();
      var s,
        i = jQuery(e.target).data("init");
      s = void 0 === i ? a.slug : i;
      var r = t('.plugins a[data-plugin="' + s + '"]');
      r.data("action", "activate"), n.pluginAction(r);
    },
    pluginInstallError: function (n, e) {
      n.preventDefault();
      var a,
        s = jQuery(n.target).data("init");
      (a = void 0 === s ? e.slug : s),
        t('.plugins a[data-plugin="' + a + '"]')
          .attr("disabled", "disabled")
          .removeClass("in-progress primary")
          .addClass("secondary")
          .html(wp.updates.l10n.installFailedShort);
    },
  };
  n.init(), (window.techalgospotlightadmin = n);
})(jQuery);
